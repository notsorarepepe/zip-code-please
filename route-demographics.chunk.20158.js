webpackJsonp([1],{Hd3W:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={cache:"no-cache",headers:{"user-agent":"NotSoRare/1.0 Pepe","content-type":"application/json"},method:"GET",mode:"cors",redirect:"follow",referrer:"no-referrer"};t.FETCH_OPTS=r,t.default=r},Ok8v:function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),c=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}return n("next")})}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r("KM04"),u=r("/QC5"),l=r("Uegq");t.default=function(e){function t(){for(var e,r,i,c,h=this,d=arguments.length,p=Array(d),f=0;f<d;f++)p[f]=arguments[f];return r=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),i.state={loading:!1,demographics:{}},i.colors={white:"#f9f1e9",asian:"#ffdebb",hispanic:"#b08558",indian:"#8b6035",island:"#704920",black:"#0b0702",multi:"#efbbff"},i.getDemographics=n(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.setState(a({},i.state,{loading:!0})),e.next=3,(0,l.fetchDemographics)(i.props.lat,i.props.lon);case 3:if(t=e.sent,r=t.data,n=t.error,!n){e.next=8;break}return console.error("Failed to fetch demographics",n),e.abrupt("return",alert("Error fetching demographics"));case 8:i.setState(a({},i.state,{loading:!1,demographics:r}));case 9:case"end":return e.stop()}},e,h)})),i.renderEmpty=function(){return{title:"Do You Even",subtitle:"WANT SEARCH RESULTS?",content:(0,s.h)("div",null,(0,s.h)("div",{key:"demo-empty-info",class:"row mt-6 mb-4"},(0,s.h)("div",{class:"col"},"...because you need to enter a zip code on the first screen to get search results.")),",",(0,s.h)("div",{key:"demo-empty-action",class:"row mt-7 mb-4"},(0,s.h)("div",{class:"col"},(0,s.h)("button",{onClick:function(){(0,u.route)("/",!0)}},"← GO BACK"))))}},i.renderLoading=function(){return{title:"Working On It!",subtitle:"FETCHING YOUR PRIVILEGE",content:(0,s.h)("div",{class:"row mt-6"},(0,s.h)("div",{class:"col"},"@todo"))}},i.getBarStyle=function(e){return i.state.demographics[e]?{width:i.state.demographics[e]+"%"}:{}},i.renderDemo=function(e){return(0,s.h)("li",null,(0,s.h)("div",{class:"bar"},(0,s.h)("div",{class:"bar-bg bg-"+e,style:i.getBarStyle(e)}),(0,s.h)("div",{class:"label"},(0,s.h)("b",null,e.toUpperCase())," ",i.state.demographics[e],"%")))},i.beckyIsShocked=function(){return i.state.demographics&&i.state.demographics.white&&parseInt(i.state.demographics.white,10)>50},i.renderContent=function(){return{title:"Demographics",subtitle:null,content:(0,s.h)("div",null,(0,s.h)("div",{class:"row mt-4"},(0,s.h)("div",{class:"col"},(0,s.h)("ul",{class:"demographics"},i.renderDemo("white"),i.renderDemo("black"),i.renderDemo("hispanic"),i.renderDemo("island"),i.renderDemo("indian"),i.renderDemo("asian"),i.renderDemo("multi")))),i.beckyIsShocked()&&(0,s.h)("div",{class:"row mt-5"},(0,s.h)("div",{class:"col"},(0,s.h)("p",{class:"becky"},"OH MY GOD BECKY LOOK AT THAT  ",(0,s.h)("i",null,"privilege!")))))}},c=r,o(i,c)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.lat&&this.props.lon?window.location.href.includes("localhost")?this.setState(a({},this.state,{demographics:{asian:"12.6",black:"9.1",hispanic:"25.5",indian:"0.5",island:"0",multi:"3.6",white:"52.1",pop:"1707916",income:"86004",error:"",density:"",income_change:"",income_block:"",sClient:"",iExit:0}})):this.getDemographics():this.setState(a({},this.state,{demographics:null}))}},{key:"render",value:function(e,t){var r=t.loading?this.renderLoading():t.demographics?this.renderContent():this.renderEmpty(),n=r.title,o=r.subtitle,i=r.content;return(0,s.h)("div",{class:"demographics center-h text-center"},(0,s.h)("div",{class:"row"},(0,s.h)("div",{class:"col"},(0,s.h)("header",null,(0,s.h)("h1",null,n)),o&&(0,s.h)("p",null,o))),i)}}]),t}(s.Component)},Uegq:function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),c=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchDemographics=void 0;var o=r("Hd3W"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(e,t){return"http://www.justicemap-api.org/api.php?fLat="+e+"&fLon="+t+"&sGeo=tract&fRadius=5"};t.fetchDemographics=function(){var e=n(regeneratorRuntime.mark(function e(t,r){var n,o,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:null,error:!1},o=null,c=a(t,r),e.prev=3,e.next=6,fetch(c,i.default);case 6:if(s=e.sent,200===s.status){e.next=9;break}throw new Error("Server responded with a non-200 status");case 9:return e.next=11,s.json();case 11:n.data=e.sent,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.error("Failed to fetch demographics",e.t0),n.error=e.t0;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e,void 0,[[3,14]])}));return function(){return e.apply(this,arguments)}}()}});
//# sourceMappingURL=route-demographics.chunk.20158.js.map